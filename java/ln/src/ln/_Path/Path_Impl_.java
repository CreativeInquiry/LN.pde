// Generated by Haxe 4.1.3
package ln._Path;

import haxe.root.*;

@SuppressWarnings(value={"rawtypes", "unchecked"})
public final class Path_Impl_
{
	public static haxe.root.Array<ln.Vector> _new(haxe.root.Array<ln.Vector> data)
	{
		//line 8 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> this1 = data;
		//line 8 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return ((haxe.root.Array<ln.Vector>) (this1) );
	}
	
	
	public static haxe.root.Array<ln.Vector> _raw(haxe.root.Array<ln.Vector> this1)
	{
		//line 12 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return this1;
	}
	
	
	public static ln.Box BoundingBox(haxe.root.Array<ln.Vector> this1)
	{
		//line 15 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 16 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		ln.Box box = new ln.Box(p.__get(0), p.__get(0));
		//line 17 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> _cdvok = p;
		//line 18 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		{
			//line 18 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g = 0;
			//line 18 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g1 = _cdvok.length;
			//line 18 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( _g < _g1 ))
			{
				//line 18 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				int _1 = _g++;
				//line 19 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v = _cdvok.__get(_1);
				//line 20 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				box = box.Extend(new ln.Box(v, v));
			}
			
		}
		
		//line 22 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return box;
	}
	
	
	public static haxe.root.Array<ln.Vector> concat(haxe.root.Array<ln.Vector> this1, haxe.root.Array<ln.Vector> other)
	{
		//line 25 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return ln._Path.Path_Impl_._new(this1.concat(ln._Path.Path_Impl_._raw(other)));
	}
	
	
	public static haxe.root.Array<ln.Vector> Transform(haxe.root.Array<ln.Vector> this1, ln.Matrix matrix)
	{
		//line 28 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 29 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> result = ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{}));
		//line 30 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> _exqql = p;
		//line 31 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		{
			//line 31 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g = 0;
			//line 31 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g1 = _exqql.length;
			//line 31 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( _g < _g1 ))
			{
				//line 31 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				int _1 = _g++;
				//line 32 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v = _exqql.__get(_1);
				//line 33 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				result = ln._Path.Path_Impl_.concat(result, ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{matrix.MulPosition(v)})));
			}
			
		}
		
		//line 35 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return result;
	}
	
	
	public static haxe.root.Array<ln.Vector> Chop(haxe.root.Array<ln.Vector> this1, double step)
	{
		//line 38 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 39 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> result = ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{}));
		//line 40 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		int i = 0;
		//line 41 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		while (( i < ( p.length - 1 ) ))
		{
			//line 42 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			ln.Vector a = p.__get(i);
			//line 43 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			ln.Vector b = p.__get(( i + 1 ));
			//line 44 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			ln.Vector v = b.Sub(a);
			//line 45 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			double l = v.Length();
			//line 46 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			if (( i == 0 )) 
			{
				//line 47 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				result = ln._Path.Path_Impl_.concat(result, ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{a})));
			}
			
			//line 49 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			double d = step;
			//line 50 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( d < l ))
			{
				//line 51 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				result = ln._Path.Path_Impl_.concat(result, ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{a.Add(v.MulScalar(( d / l )))})));
				//line 52 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				d += step;
			}
			
			//line 54 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			result = ln._Path.Path_Impl_.concat(result, ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{b})));
			//line 55 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			 ++ i;
		}
		
		//line 57 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return result;
	}
	
	
	public static haxe.root.Array<haxe.root.Array<ln.Vector>> Filter(haxe.root.Array<ln.Vector> this1, ln.Filter f)
	{
		//line 60 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 61 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<haxe.root.Array<ln.Vector>> result = ln._Paths.Paths_Impl_._new(new haxe.root.Array<haxe.root.Array<ln.Vector>>(new haxe.root.Array[]{}));
		//line 62 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> path = ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{}));
		//line 63 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> _sbbcu = p;
		//line 64 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		{
			//line 64 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g = 0;
			//line 64 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g1 = _sbbcu.length;
			//line 64 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( _g < _g1 ))
			{
				//line 64 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				int _1 = _g++;
				//line 65 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v = _sbbcu.__get(_1);
				//line 66 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				haxe.root.Array _ymuir = f.Filter(v);
				//line 67 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v1 = ((ln.Vector) (_ymuir.__get(0)) );
				//line 68 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				boolean ok = haxe.lang.Runtime.toBool(((java.lang.Boolean) (_ymuir.__get(1)) ));
				//line 69 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				if (ok) 
				{
					//line 70 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
					path = ln._Path.Path_Impl_.concat(path, ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{v1})));
				}
				else
				{
					//line 73 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
					if (( ln._Path.Path_Impl_._raw(path).length > 1 )) 
					{
						//line 74 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
						result = ln._Paths.Paths_Impl_.concat(result, ln._Paths.Paths_Impl_._new(new haxe.root.Array<haxe.root.Array<ln.Vector>>(new haxe.root.Array[]{path})));
					}
					
					//line 76 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
					path = ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{}));
				}
				
			}
			
		}
		
		//line 79 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		if (( ln._Path.Path_Impl_._raw(path).length > 1 )) 
		{
			//line 80 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			result = ln._Paths.Paths_Impl_.concat(result, ln._Paths.Paths_Impl_._new(new haxe.root.Array<haxe.root.Array<ln.Vector>>(new haxe.root.Array[]{path})));
		}
		
		//line 82 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return result;
	}
	
	
	public static haxe.root.Array<ln.Vector> Simplify(haxe.root.Array<ln.Vector> this1, double threshold)
	{
		//line 85 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 86 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		if (( p.length < 3 )) 
		{
			//line 87 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			return ln._Path.Path_Impl_._new(p);
		}
		
		//line 89 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		ln.Vector a = p.__get(0);
		//line 90 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		ln.Vector b = p.__get(( p.length - 1 ));
		//line 91 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		int index = -1;
		//line 92 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		double distance = 0.0;
		//line 93 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		int i = 1;
		//line 94 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		while (( i < ( p.length - 1 ) ))
		{
			//line 95 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			double d = p.__get(i).SegmentDistance(a, b);
			//line 96 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			if (( d > distance )) 
			{
				//line 97 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				index = i;
				//line 98 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				distance = d;
			}
			
			//line 100 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			 ++ i;
		}
		
		//line 102 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		if (( distance > threshold )) 
		{
			//line 103 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			haxe.root.Array<ln.Vector> r1 = ln._Path.Path_Impl_.Simplify(ln._Path.Path_Impl_._new(p.slice(0, ( index + 1 ))), threshold);
			//line 104 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			haxe.root.Array<ln.Vector> r2 = ln._Path.Path_Impl_.Simplify(ln._Path.Path_Impl_._new(p.slice(index, null)), threshold);
			//line 105 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			return ln._Path.Path_Impl_._new(ln._Path.Path_Impl_._raw(r1).slice(0, ( ln._Path.Path_Impl_._raw(r1).length - 1 )).concat(ln._Path.Path_Impl_._raw(r2)));
		}
		else
		{
			//line 108 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			return ln._Path.Path_Impl_._new(new haxe.root.Array<ln.Vector>(new ln.Vector[]{a, b}));
		}
		
	}
	
	
	public static void Print(haxe.root.Array<ln.Vector> this1)
	{
		//line 112 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 113 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> _wiifh = p;
		//line 114 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		{
			//line 114 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g = 0;
			//line 114 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g1 = _wiifh.length;
			//line 114 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( _g < _g1 ))
			{
				//line 114 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				int _1 = _g++;
				//line 115 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v = _wiifh.__get(_1);
				//line 116 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				haxe.Log.trace.__hx_invoke2_o(0.0, ( ( ( ( "" + haxe.lang.Runtime.toString(v.X) ) + "," ) + haxe.lang.Runtime.toString(v.Y) ) + ";" ), 0.0, new haxe.lang.DynamicObject(new java.lang.String[]{"className", "fileName", "methodName"}, new java.lang.Object[]{"ln._Path.Path_Impl_", "ln/Path.hx", "Print"}, new java.lang.String[]{"lineNumber"}, new double[]{((double) (((double) (116) )) )}));
			}
			
		}
		
		//line 118 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.Log.trace.__hx_invoke2_o(0.0, "", 0.0, new haxe.lang.DynamicObject(new java.lang.String[]{"className", "fileName", "methodName"}, new java.lang.Object[]{"ln._Path.Path_Impl_", "ln/Path.hx", "Print"}, new java.lang.String[]{"lineNumber"}, new double[]{((double) (((double) (118) )) )}));
	}
	
	
	public static java.lang.String String(haxe.root.Array<ln.Vector> this1)
	{
		//line 121 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 122 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<java.lang.String> parts = new haxe.root.Array<java.lang.String>(new java.lang.String[]{});
		//line 123 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> _arugh = p;
		//line 124 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		{
			//line 124 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g = 0;
			//line 124 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g1 = _arugh.length;
			//line 124 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( _g < _g1 ))
			{
				//line 124 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				int _1 = _g++;
				//line 125 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v = _arugh.__get(_1);
				//line 126 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				parts = parts.concat(new haxe.root.Array<java.lang.String>(new java.lang.String[]{( ( ( "" + haxe.lang.Runtime.toString(v.X) ) + "," ) + haxe.lang.Runtime.toString(v.Y) )}));
			}
			
		}
		
		//line 128 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return parts.join(";");
	}
	
	
	public static java.lang.String ToSVG(haxe.root.Array<ln.Vector> this1)
	{
		//line 131 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> p = this1;
		//line 132 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<java.lang.String> coords = new haxe.root.Array<java.lang.String>(new java.lang.String[]{});
		//line 133 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		haxe.root.Array<ln.Vector> _pjwzf = p;
		//line 134 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		{
			//line 134 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g = 0;
			//line 134 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			int _g1 = _pjwzf.length;
			//line 134 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
			while (( _g < _g1 ))
			{
				//line 134 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				int _1 = _g++;
				//line 135 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				ln.Vector v = _pjwzf.__get(_1);
				//line 136 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
				coords = coords.concat(new haxe.root.Array<java.lang.String>(new java.lang.String[]{( ( ( "" + haxe.lang.Runtime.toString(v.X) ) + "," ) + haxe.lang.Runtime.toString(v.Y) )}));
			}
			
		}
		
		//line 138 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		java.lang.String points = coords.join(" ");
		//line 139 "/Users/lingdonghuang/proj/go2json/ln/Path.hx"
		return ( ( "<polyline stroke=\"black\" fill=\"none\" points=\"" + points ) + "\" />" );
	}
	
	
}


